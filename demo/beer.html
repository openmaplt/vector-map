<!DOCTYPE html>
<html>
<head>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106607459-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)};
    gtag('js', new Date());
    gtag('config', 'UA-18331326-1');
</script>
    <meta charset='utf-8' />
    <title>Craft alaus žemėlapis</title>
    <meta name="description" content="Vietos, kur Lietuvoje galima paragauti arba įsigyti Craft alaus: parduotuvėlės, aludės, restoranai ir pan."</meta>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.40.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
        #layers {right: 5px; top: 5px;}
        .mapboxgl-popup-content img {max-width: 400px; max-height: 400px;}
        .icon {width: 15px; display: inline-block; text-align: center;}

    .menu {
      font: 11px/18px 'Helvetica Neue', Arial, Helvetica, sans-serif;
      font-weight: 550;
      color: #fff;
      display: flex;
      flex-direction: column;
      position: absolute;
      top: 7px;
      right: 7px;
      padding: 4px;
      width: 120px;
    }
    .menu input[type=checkbox] {
        display: none;
    }
    .menu input[type=checkbox] + label {
        background-color: #333333;
        display: block;
        cursor: pointer;
        padding: 7px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.25);
        margin-bottom: 0px;
    }
    .menu input[type=checkbox] + label {
        background-color: #333333;
        text-transform: capitalize;
    }
    .menu input[type=checkbox]:checked + label {
        background-color: #fff480;
        color: #000;
    }
    .menu input[type=checkbox]:checked + label:before {
        content: '✔';
        margin-right: 5px;
    }
    .menu2 {
      display: flex;
      flex-direction: row;
    }
    .menu2 input[type=checkbox] + label {
      width: 55px;
    }
    </style>
</head>
<body>
<div id="map"></div>
<div class="menu" style="border-radius: 7px;">
  <div><input type="checkbox" id="label-lager" checked="true"  onChange="change()"><label style="border-radius: 7px 7px 0 0;" for="label-lager">Lageris</label></div>
  <div><input type="checkbox" id="label-ale"   checked="true"  onChange="change()"><label for="label-ale"  >Elis</label></div>
  <div><input type="checkbox" id="label-wheat" checked="true"  onChange="change()"><label for="label-wheat">Kvietinis</label></div>
  <div><input type="checkbox" id="label-stout" checked="true"  onChange="change()"><label for="label-stout">Stautas</label></div>
  <div><input type="checkbox" id="label-ipa"   checked="true"  onChange="change()"><label style="border-radius: 0 0 7px 7px;" for="label-ipa"  >IPA</label></div>
  <div style="margin-bottom: 5px;" class="menu2">
    <div><input type="checkbox" id="label-or"    checked="true"  onChange="changeCond('any')"><label style="border-radius: 7px 0 0 7px;" for="label-or">ARBA</label></div>
    <div><input type="checkbox" id="label-and"    onChange="changeCond('all')"><label style="border-radius: 0 7px 7px 0;" for="label-and">IR</label></div>
  </div>
  <div><input type="checkbox" id="label-drink" checked="true"  onChange="changeType('drink')"><label style="border-radius: 7px 7px 0 0;" for="label-drink">Gerti</label></div>
  <div><input type="checkbox" id="label-shop"   onChange="changeType('shop')"><label style="border-radius: 0 0 7px 7px;" for="label-shop">Išsinešti</label></div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.40.0/mapbox-gl.js'></script>
<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-supported/v1.2.0/mapbox-gl-supported.js'></script>
<script>
  var defaultType = 'beer_dark';
  var mapTypes = {
    beer_dark: 'c'
  };
  var filterCond = 'any';
  var filterPlace = 'drink';
  function change() {
    var filters = [filterCond];
    if (document.getElementById("label-lager").checked) {
      filters.push(['==', 'style_lager', 'y']);
    }
    if (document.getElementById("label-ale").checked) {
      filters.push(['==', 'style_ale', 'y']);
    }
    if (document.getElementById("label-wheat").checked) {
      filters.push(['==', 'style_wheat', 'y']);
    }
    if (document.getElementById("label-stout").checked) {
      filters.push(['==', 'style_stout', 'y']);
    }
    if (document.getElementById("label-ipa").checked) {
      filters.push(['==', 'style_ipa', 'y']);
    }
    var filterMain = ['all'];
    if (filterPlace == 'drink') {
      filterMain.push(['==', 'drink', 'y']);
    } else {
      filterMain.push(['==', 'shop', 'y']);
    }
    filterMain.push(filters.length > 1 ? filters : null);
    map.setFilter('label-amenity', filterMain);
  }
  function changeCond(f) {
    filterCond = f;
    if (f == 'any') {
      document.getElementById("label-or").checked = true;
      document.getElementById("label-and").checked = false;
    } else {
      document.getElementById("label-or").checked = false;
      document.getElementById("label-and").checked = true;
    }
    change();
  }
  function changeType(f) {
    filterPlace = f;
    if (f == 'drink') {
      document.getElementById("label-drink").checked = true;
      document.getElementById("label-shop").checked = false;
    } else {
      document.getElementById("label-drink").checked = false;
      document.getElementById("label-shop").checked = true;
    }
    change();
  }
</script>
<script src="map.js"></script>
</body>
</html>
